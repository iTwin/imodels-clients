parameters:
- name: shouldPublish
  type: boolean
  default: false

steps:
  - script: node common/scripts/install-run-rush.js publish --publish --include-all --set-access-level public
    displayName: rush publish package
    condition: and(succeeded(), eq(variables['Agent.OS'], 'Windows_NT'), eq(variables['Build.SourceBranch'], 'refs/heads/main'), ${{ parameters.shouldPublish }} )
    env:
      NPM_AUTH_TOKEN: $(npmToken)
